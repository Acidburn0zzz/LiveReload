soa = require 'livereload-soa'

module.exports = (carrier) ->
  muxer = soa.createMuxer(carrier)

  endpoints = []
  endpoints.push require('livereload-service-dummy')
  endpoints.push require('livereload-service-server')
  endpoints.push require('livereload-service-reloader')
  endpoints.push require('livereload-service-msgparser')

  for endpoint in endpoints
    endpoint(muxer)

  return muxer
